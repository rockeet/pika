{
  "http": {
    "document_root": "/",
    "num_threads": "5",
    "listening_ports": "8088"
  },
  "setenv": {
    "DictZipBlobStore_zipThreads_nouse": 8
  },
  "AnyPlugin": {
    "pika_conf": "PikaConfShowPlugin",
    "build_version": "BuildVersionsShowPlugin",
    "meta_key_decoder":         "HtmlTextUserKeyCoder",
    "base_data_key_decoder":      "BaseDataKeyDecoder",
    "zsets_score_key_decoder":  "ZSetsScoreKeyDecoder",
    "lists_data_key_decoder" :   "ListsDataKeyDecoder"
  },
  "Statistics": {
    "stat-hashes" : {
      "class": "default",
      "params": {
        "//comment": "stats_level default is kExceptDetailedTimers",
        "stats_level": "kExceptDetailedTimers"
      }
    },
    "stat-lists"  : "default",
    "stat-strings": "default",
    "stat-sets"   : "default",
    "stat-zsets"  : "default"
  },
  "WriteBufferManager" : {
    "wbm": {
      "class": "WriteBufferManager",
      "params": {
        "buffer_size": "128M"
      }
    }
  },
  "CompactionFilterFactory": {
    "strings"  :   "StringsFilterFactory",
    "base-meta":  "BaseMetaFilterFactory",
    "list-meta": "ListsMetaFilterFactory",
    "list-data": {
      "class": "ListsDataFilterFactory",
      "params": {
        "type": "lists"
      }
    },
    "hash-meta": "BaseMetaFilterFactory",
    "hash-data": {
      "class": "BaseDataFilterFactory",
      "params": {
        "type": "hashes"
      }
    },
    "set-meta": "BaseMetaFilterFactory",
    "set-member": {
      "class": "BaseDataFilterFactory",
      "params": {
        "type": "sets"
      }
    },
    "zset-meta": "BaseMetaFilterFactory",
    "zset-data": {
      "class": "BaseDataFilterFactory",
      "params": {
        "type": "zsets"
      }
    },
    "zset-score": {
      "class": "ZSetsScoreFilterFactory",
      "params": {
        "type": "zsets"
      }
    }
  },
  "TableFactory": {
    "terark-fast": {
      "class": "TerarkFastTable",
      "params": {
        "indexType": "MainPatricia",
        "keyPrefixLen": 0
      }
    },
    "terark-zip": {
      "class": "TerarkZipTable",
      "params": {
        "localTempDir": "/tmp",
        "indexType": "Mixed_XL_256_32_FL",
        "indexNestLevel": 3,
        "indexNestScale": 8,
        "indexTempLevel": 0,
        "indexCacheRatio": 0.0,
        "warmupLevel": "kIndex",
        "disableCompressDict": true,
        "optimizeCpuL3Cache": true,
        "enableEntropyStore": false,
        "offsetArrayBlockUnits": 128,
        "sampleRatio": 0.01,
        "checksumLevel": 0,
        "entropyAlgo": "kNoEntropy",
        "debugLevel": 0,
        "softZipWorkingMemLimit": "16G",
        "hardZipWorkingMemLimit": "32G",
        "smallTaskMemory": "1G",
        "minDictZipValueSize": 30,
        "keyPrefixLen": 0,
        "minPreadLen": -1
      }
    },
    "dispatch": {
      "class": "DispatcherTable",
      "params": {
        "default": "terark-fast",
        "readers": {
          "TerarkFastTable": "terark-fast",
          "TerarkZipTable": "terark-zip"
        },
        "level_writers": [
          "terark-fast", "terark-fast",
          "terark-zip", "terark-zip", "terark-zip", "terark-zip", "terark-zip"
        ]
      }
    }
  },
  "CFOptions": {
    "hash-data": {
      "max_write_buffer_number": 4, "write_buffer_size": "128M",
      "target_file_size_base": "16M", "target_file_size_multiplier": 2,
      "table_factory": "${dispatch}", "#max_bytes_for_level_multiplier": 4,
      "html_user_key_coder": "$base_data_key_decoder",
      "compaction_filter_factory": "${hash-data}"
    },
    "set-member": {
      "max_write_buffer_number": 4, "write_buffer_size": "128M",
      "target_file_size_base": "16M", "target_file_size_multiplier": 2,
      "table_factory": "${dispatch}",
      "html_user_key_coder": "$base_data_key_decoder",
      "compaction_filter_factory": "${set-member}"
    },
    "zset-data": {
      "max_write_buffer_number": 4, "write_buffer_size": "128M",
      "target_file_size_base": "16M", "target_file_size_multiplier": 2,
      "table_factory": "${dispatch}",
      "html_user_key_coder": "$base_data_key_decoder",
      "compaction_filter_factory": "${zset-data}"
    },
    "base-meta": {
      "max_write_buffer_number": 4, "write_buffer_size": "16M",
      "target_file_size_base": "8M", "target_file_size_multiplier": 2,
      "table_factory": "${dispatch}",
      "html_user_key_coder": "$meta_key_decoder",
      "compaction_filter_factory": "${base-meta}"
    },
    "strings": {
      "max_write_buffer_number": 4, "write_buffer_size": "128M",
      "target_file_size_base": "8M", "target_file_size_multiplier": 2,
      "table_factory": "${dispatch}",
      "html_user_key_coder": "$meta_key_decoder",
      "compaction_filter_factory": "${strings}"
    },
    "list-data": {
      "max_write_buffer_number": 4, "write_buffer_size": "16M",
      "target_file_size_base": "8M", "target_file_size_multiplier": 2,
      "table_factory": "${dispatch}",
      "html_user_key_coder": "$lists_data_key_decoder",
      "compaction_filter_factory": "${list-data}"
    },
    "list-meta": {
      "max_write_buffer_number": 4, "write_buffer_size": "16M",
      "target_file_size_base": "8M", "target_file_size_multiplier": 2,
      "table_factory": "${dispatch}",
      "html_user_key_coder": "$meta_key_decoder",
      "compaction_filter_factory": "${list-meta}"
    },
    "zset-score": {
      "max_write_buffer_number": 4, "write_buffer_size": "16M",
      "target_file_size_base": "8M", "target_file_size_multiplier": 2,
      "table_factory": "${dispatch}",
      "html_user_key_coder": "$zsets_score_key_decoder",
      "compaction_filter_factory": "${zset-score}"
    }
  },
  "databases": {
    "strings": {
      "method": "DB::Open",
      "params": {
        "db_options": {
          "advise_random_on_open": true,
          "create_if_missing": true,
          "create_missing_column_families": true,
          "max_background_flushes": 1,
          "max_background_compactions": 20,
          "max_subcompactions": 1,
          "max_level1_subcompactions": 3,
          "write_buffer_manager": "${wbm}",
          "WAL_size_limit_MB": 0,
          "statistics": "${stat-strings}",
          "allow_mmap_reads": true
        },
        "column_families": {
          "default": "${strings}"
        },
        "path": "db/db0/strings"
      }
    },
    "hashes": {
      "method": "DB::Open",
      "params": {
        "db_options": {
          "advise_random_on_open": true,
          "create_if_missing": true,
          "create_missing_column_families": true,
          "max_background_flushes": 1,
          "max_background_compactions": 20,
          "max_subcompactions": 1,
          "max_level1_subcompactions": 3,
          "write_buffer_manager": "${wbm}",
          "WAL_size_limit_MB": 0,
          "statistics": "${stat-hashes}",
          "allow_mmap_reads": true
        },
        "column_families": {
          "default": "${base-meta}",
          "data_cf": "${hash-data}"
        },
        "path": "db/db0/hashes"
      }
    },
    "sets": {
      "method": "DB::Open",
      "params": {
        "db_options": {
          "advise_random_on_open": true,
          "create_if_missing": true,
          "create_missing_column_families": true,
          "max_background_flushes": 1,
          "max_background_compactions": 20,
          "max_subcompactions": 1,
          "max_level1_subcompactions": 3,
          "write_buffer_manager": "${wbm}",
          "WAL_size_limit_MB": 0,
          "statistics": "${stat-sets}",
          "allow_mmap_reads": true
        },
        "column_families": {
          "default": "${base-meta}",
          "member_cf": "${set-member}"
        },
        "path": "db/db0/sets"
      }
    },
    "zsets": {
      "method": "DB::Open",
      "params": {
        "db_options": {
          "advise_random_on_open": true,
          "create_if_missing": true,
          "create_missing_column_families": true,
          "max_background_flushes": 1,
          "max_background_compactions": 20,
          "max_subcompactions": 1,
          "max_level1_subcompactions": 3,
          "write_buffer_manager": "${wbm}",
          "WAL_size_limit_MB": 0,
          "statistics": "${stat-zsets}",
          "allow_mmap_reads": true
        },
        "column_families": {
          "default": "${base-meta}",
          "data_cf": "${zset-data}",
          "score_cf": "${zset-score}"
        },
        "path": "db/db0/zsets"
      }
    },
    "lists": {
      "method": "DB::Open",
      "params": {
        "db_options": {
          "create_if_missing": true,
          "create_missing_column_families": true,
          "max_background_flushes": 1,
          "max_background_compactions": 20,
          "max_subcompactions": 1,
          "max_level1_subcompactions": 3,
          "write_buffer_manager": "${wbm}",
          "WAL_size_limit_MB": 0,
          "statistics": "${stat-lists}",
          "allow_mmap_reads": true
        },
        "column_families": {
          "default": "${list-meta}",
          "data_cf": "${list-data}"
        },
        "path": "db/db0/lists"
      }
    }
  }
}
